\chapter{File Format}
Discuss the high-level file format.  In particular, the magic number, the constant pools, the organisation into modules (files?) and blocks, etc.

\section{The {\tt WyilFile} Structure}

\begin{lstlisting}
type WyilFile is {

  u64 magic,
  uv  kind,
  uv  size,
  uv  major_version,
  uv  minor_version,
  uv  string_pool_count,
  uv  path_pool_count,
  uv  name_pool_count,
  uv  type_pool_count,
  uv  constant_pool_count,
  uv  numBlocks, // unused

  StringItem string_pool[string_pool_count]
  PathItem path_pool[path_pool_count]
  NameItem name_pool[name_pool_count]
  TypeItem type_pool[type_pool_count]
  ConstantItem constant_pool[constant_pool_count]

  ~~ u8 ~~

  FileItem file // to be files?
}
\end{lstlisting}

\section{The {\tt StringItem} Structure}

\begin{lstlisting}
type StringItem is {

}
\end{lstlisting}


\section{The {\tt PathItem} Structure}

\begin{lstlisting}
type PathItem is {

}
\end{lstlisting}


\section{The {\tt NameItem} Structure}

\begin{lstlisting}
type NameItem is {

}
\end{lstlisting}


\section{The {\tt TypeItem} Structure}

\begin{lstlisting}
type TypeItem is {

}
\end{lstlisting}

\section{The {\tt ConstantItem} Structure}

\begin{lstlisting}
type ConstantItem is {

}
\end{lstlisting}

\section{The {\tt FileItem} Structure}

\begin{lstlisting}
type FileItem is {

}
\end{lstlisting}
